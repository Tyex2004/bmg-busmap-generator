# 🚌 BMG - Bus Map Generator 公共汽车线路图生成器

一个用于将与公共汽车相关的结构化数据（道路节点、道路、车站、线路、地铁站）渲染为线路图的 Python 工具。

适用于：多用于公共汽车网络展示，可以在交通规划中作参考。

**（目前该生成器还在处于初步开发阶段，功能仍未完整！！）**

**（目前生成器暂时只能通过手动运行 python 执行，后续会提供 GUI 操作支持！！）**

---

## 🚀 快速开始（此文已作废，因为现在开始升级了 GUI）

#### 1. 布置环境

- 暂时先只能在 Windows 系统上运行
- 安装 Python 3.9 +
- 下载项目代码（直接克隆此仓库或下载压缩包）
- 安装相关依赖

#### 2. 准备数据（此仓库的 data/ 目录下已有示例数据）

- 数据说明参考 [`data/数据说明.md`](./data/数据说明.md) 并确保数据齐全
- 使用 vscode 或 PyCharm 等文本编辑器编辑数据
- 使用数据管理工具（用法待更新）处理数据

#### 3. 执行生成

直接运行 `run.py`，会在 output/ 目录下生成两个文件：

- `道路预览.svg`：道路的预览图，包含各道路和车站的位置，不含公共汽车线路信息，便于道路的可视化。
- `线路图.svg`: 渲染好的公共汽车线路信息的线路图。

## ✨ 功能特性

- 渲染结构化公交线路图（含道路、车站、路线）
- 支持地铁站、连接线路的标注
- 自动计算画布尺寸与偏移
- 可以 SVG 格式导出（目前为基础版）

---

## 📁 项目结构（旧版）

```
├── backup/                   # 暂存数据管理工具（除撤销外）处理前的备份数据以允许撤销
├── data/                     # 数据目录
│   ├── mtr_stations.json     # 地铁站点数据
│   ├── nodes.json            # 节点数据
│   ├── roads.json            # 道路数据
│   ├── routes.json           # 公共汽车线路数据
│   └── stations.json         # 公共汽车站点数据
├── management-tools/         # 数据管理工具的源代码
├── ouput/                    # 输出道路预览图和线路图
│   ├── 道路预览.svg            # 道路预览图
│   └── 线路图.svg             # 线路图
├── shell-scripts/            # 数据管理工具的 shell 脚本
├── src/                      # 核心包
├── undone/                   # 暂存撤销操作后的备份数据以允许恢复
├── LICENSE.txt               # 协议文件
├── Management.ps1            # 数据管理工具执行入口（Windows）
├── README.md                 # 项目说明文档
├── requirements.txt          # Python 依赖
└── run.py                    # 渲染主程序入口
```

其实我们只需要管 data/ 目录下的 json 文件即可，要手动执行的脚本也只有 `run.py`，而数据管理工具也只需要用 PowerShell 执行 `Managment.ps1`，然后再从 output/ 目录找输出的线路图，其他文件都是辅助工具或数据。

---

## 📊 数据说明（简化版）

- **nodes.json**：道路节点信息，道路节点是此生成器一切几何空间参考的基础；
- **roads.json**：道路信息，每条道路由于两个节点相连，且显然它是有向线段；
- **stations.json**：公共汽车站信息，车站是定义在道路上的点；
- **routes.json**：公共汽车线路信息，公共汽车从起点，经过若干条道路，到达终点；
- **mtr_stations.json**：地铁站信息，地铁站包含名字和它停靠列车的线路。

👉 详细字段结构见 [`data/数据说明.md`](./data/数据说明.md)

---

## 🖼️ 输出说明

### 道路预览图

- 包含各道路和车站的位置，不含公共汽车线路信息，便于道路的可视化。
- 输出文件名：`道路预览.svg`

### 线路图（待开发完成）

- 渲染好的公共汽车线路信息的线路图。
- 输出文件名：`线路图.svg`

---

## 🧩 技术栈

- Python 3.9+（变成可执行文件了）
- .NET 8.0
- 数据格式：JSON
- 图形渲染（TODO）：svgwrite（可扩展）

---

## 🛠️ 后续计划

- 完善线路图渲染（目前只做出还未完善的道路预览图）
- 完善数据管理工具
- 搞 GUI

---

## 📄 协议与贡献

- 本项目采用 MIT 协议开源，欢迎自由使用和修改
- 如有建议或需求，欢迎提 [Issue](https://github.com/yourname/BusMapRenderer/issues) 或 [PR](https://github.com/yourname/BusMapRenderer/pulls)

---

由 [Tyex](https://www.tyex.ink) 开发维护。
